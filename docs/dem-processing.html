<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 11 DEM processing | Quantitative Environmental Methods: LRES 546</title>
  <meta name="description" content="Chapter 11 DEM processing | Quantitative Environmental Methods: LRES 546" />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 11 DEM processing | Quantitative Environmental Methods: LRES 546" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 11 DEM processing | Quantitative Environmental Methods: LRES 546" />
  
  
  

<meta name="author" content="Tim Covino &amp; Lauren Kremer" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="learning-module-10---gridded-and-tabular-data-retrieval.html"/>
<link rel="next" href="evapotranspiration.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">lres_546</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#course-overview-and-objectives"><i class="fa fa-check"></i><b>1.1</b> Course overview and objectives</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#course-description"><i class="fa fa-check"></i><b>1.2</b> Course Description</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#structure"><i class="fa fa-check"></i><b>1.3</b> Structure</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#philosophical-approach-and-resources"><i class="fa fa-check"></i><b>1.4</b> Philosophical approach and resources</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#tentative-schedule-subject-to-change"><i class="fa fa-check"></i><b>1.5</b> Tentative schedule, subject to change</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="hydrograph-separation-learning-module.html"><a href="hydrograph-separation-learning-module.html"><i class="fa fa-check"></i><b>2</b> Hydrograph separation: learning module</a>
<ul>
<li class="chapter" data-level="2.1" data-path="hydrograph-separation-learning-module.html"><a href="hydrograph-separation-learning-module.html#summary"><i class="fa fa-check"></i><b>2.1</b> Summary</a></li>
<li class="chapter" data-level="2.2" data-path="hydrograph-separation-learning-module.html"><a href="hydrograph-separation-learning-module.html#overall-learning-objectives"><i class="fa fa-check"></i><b>2.2</b> Overall Learning Objectives</a></li>
<li class="chapter" data-level="2.3" data-path="hydrograph-separation-learning-module.html"><a href="hydrograph-separation-learning-module.html#lecture"><i class="fa fa-check"></i><b>2.3</b> Lecture</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="hydrograph-separation-learning-module.html"><a href="hydrograph-separation-learning-module.html#components-of-streamflow-during-a-rain-event"><i class="fa fa-check"></i><b>2.3.1</b> Components of streamflow during a rain event</a></li>
<li class="chapter" data-level="2.3.2" data-path="hydrograph-separation-learning-module.html"><a href="hydrograph-separation-learning-module.html#storm-flow-through-a-hillslope"><i class="fa fa-check"></i><b>2.3.2</b> Storm flow through a hillslope</a></li>
<li class="chapter" data-level="2.3.3" data-path="hydrograph-separation-learning-module.html"><a href="hydrograph-separation-learning-module.html#how-we-quantify-baseflow"><i class="fa fa-check"></i><b>2.3.3</b> How we quantify baseflow</a></li>
<li class="chapter" data-level="2.3.4" data-path="hydrograph-separation-learning-module.html"><a href="hydrograph-separation-learning-module.html#baseflow-separation-methods"><i class="fa fa-check"></i><b>2.3.4</b> Baseflow separation methods</a></li>
<li class="chapter" data-level="2.3.5" data-path="hydrograph-separation-learning-module.html"><a href="hydrograph-separation-learning-module.html#watershed-controls-on-baseflow-and-stormflow"><i class="fa fa-check"></i><b>2.3.5</b> Watershed controls on baseflow and stormflow</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="hydrograph-separation-learning-module.html"><a href="hydrograph-separation-learning-module.html#assessment"><i class="fa fa-check"></i><b>2.4</b> Assessment</a></li>
<li class="chapter" data-level="2.5" data-path="hydrograph-separation-learning-module.html"><a href="hydrograph-separation-learning-module.html#interactive-application-and-questions"><i class="fa fa-check"></i><b>2.5</b> Interactive application and questions</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="hydrograph-separation-learning-module.html"><a href="hydrograph-separation-learning-module.html#initial-data-exploration"><i class="fa fa-check"></i><b>2.5.1</b> Initial data exploration</a></li>
<li class="chapter" data-level="2.5.2" data-path="hydrograph-separation-learning-module.html"><a href="hydrograph-separation-learning-module.html#synthesis-questions"><i class="fa fa-check"></i><b>2.5.2</b> Synthesis Questions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="hydrograph-separation-lab-module-20-pts.html"><a href="hydrograph-separation-lab-module-20-pts.html"><i class="fa fa-check"></i><b>3</b> Hydrograph separation: lab module (20 pts)</a>
<ul>
<li class="chapter" data-level="3.1" data-path="hydrograph-separation-lab-module-20-pts.html"><a href="hydrograph-separation-lab-module-20-pts.html#intro"><i class="fa fa-check"></i><b>3.1</b> Intro</a></li>
<li class="chapter" data-level="3.2" data-path="hydrograph-separation-lab-module-20-pts.html"><a href="hydrograph-separation-lab-module-20-pts.html#reading-for-this-lab"><i class="fa fa-check"></i><b>3.2</b> Reading for this lab</a></li>
<li class="chapter" data-level="3.3" data-path="hydrograph-separation-lab-module-20-pts.html"><a href="hydrograph-separation-lab-module-20-pts.html#repo"><i class="fa fa-check"></i><b>3.3</b> Repo</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="learning-module-2---return-intervals-14-pts.html"><a href="learning-module-2---return-intervals-14-pts.html"><i class="fa fa-check"></i><b>4</b> Learning module 2 - Return intervals (14 pts)</a>
<ul>
<li class="chapter" data-level="4.1" data-path="learning-module-2---return-intervals-14-pts.html"><a href="learning-module-2---return-intervals-14-pts.html#background-information"><i class="fa fa-check"></i><b>4.1</b> Background information</a></li>
<li class="chapter" data-level="4.2" data-path="learning-module-2---return-intervals-14-pts.html"><a href="learning-module-2---return-intervals-14-pts.html#intro-1"><i class="fa fa-check"></i><b>4.2</b> Intro</a></li>
<li class="chapter" data-level="4.3" data-path="learning-module-2---return-intervals-14-pts.html"><a href="learning-module-2---return-intervals-14-pts.html#packages"><i class="fa fa-check"></i><b>4.3</b> Packages</a></li>
<li class="chapter" data-level="4.4" data-path="learning-module-2---return-intervals-14-pts.html"><a href="learning-module-2---return-intervals-14-pts.html#precipitation-return-intervals"><i class="fa fa-check"></i><b>4.4</b> Precipitation return intervals</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="learning-module-2---return-intervals-14-pts.html"><a href="learning-module-2---return-intervals-14-pts.html#q1.-2-pts-what-is-the-probability-that-the-annual-precipitation-in-a-given-year-is-less-than-400-mm-this-is-the-fa-in-the-cdf-in-the-probability-lecture-slides."><i class="fa fa-check"></i><b>4.4.1</b> <strong>Q1. (2 pts) What is the probability that the annual precipitation in a given year is less than 400 mm? This is the F(A) in the CDF in the probability lecture slides.</strong></a></li>
<li class="chapter" data-level="4.4.2" data-path="learning-module-2---return-intervals-14-pts.html"><a href="learning-module-2---return-intervals-14-pts.html#q2.-2-pts-what-is-the-probability-that-the-maximum-annual-precipitation-in-a-given-year-is-greater-than-500-mm"><i class="fa fa-check"></i><b>4.4.2</b> <strong>Q2. (2 pts) What is the probability that the maximum annual precipitation in a given year is GREATER than 500 mm?</strong></a></li>
<li class="chapter" data-level="4.4.3" data-path="learning-module-2---return-intervals-14-pts.html"><a href="learning-module-2---return-intervals-14-pts.html#q3.-2-pts-what-is-the-probability-that-the-annual-p-is-between-400-and-500-mm"><i class="fa fa-check"></i><b>4.4.3</b> <strong>Q3. (2 pts) What is the probability that the annual P is between 400 and 500 mm?</strong></a></li>
<li class="chapter" data-level="4.4.4" data-path="learning-module-2---return-intervals-14-pts.html"><a href="learning-module-2---return-intervals-14-pts.html#q4.-2-pts-what-is-the-return-period-for-a-year-with-at-least-550-mm-of-precip-the-return-period-tr-is-calculated-as-tr-1p-with-p-being-the-probability-for-an-event-to-occur."><i class="fa fa-check"></i><b>4.4.4</b> <strong>Q4. (2 pts) What is the return period for a year with AT LEAST 550 mm of precip? The return period, Tr, is calculated as Tr = 1/p, with p being the probability for an event to occur.</strong></a></li>
<li class="chapter" data-level="4.4.5" data-path="learning-module-2---return-intervals-14-pts.html"><a href="learning-module-2---return-intervals-14-pts.html#q5.-6-pts-explain-why-probability-analysis-of-climate-data-assumes-the-data-are-normally-distributed-and-stationary-below-provide-a-histogram-and-a-density-plot-of-the-total-annual-p-data-and-comment-on-the-visual-appearance-in-terms-of-normality.-next-use-google-and-the-links-below-to-test-for-normality-and-stationarity.-be-quantitative-in-commenting-on-the-normality-and-stationarity-of-the-total-p-data."><i class="fa fa-check"></i><b>4.4.5</b> <strong>Q5. (6 pts) Explain why probability analysis of climate data assumes the data are normally distributed and stationary? Below provide a histogram and a density plot of the total annual P data and comment on the visual appearance in terms of normality. Next use google and the links below to test for normality and stationarity. Be quantitative in commenting on the normality and stationarity of the total P data.</strong></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="rational-method-and-nrcs-curve-number-20-pts.html"><a href="rational-method-and-nrcs-curve-number-20-pts.html"><i class="fa fa-check"></i><b>5</b> Rational method and NRCS curve number (20 pts)</a>
<ul>
<li class="chapter" data-level="5.1" data-path="rational-method-and-nrcs-curve-number-20-pts.html"><a href="rational-method-and-nrcs-curve-number-20-pts.html#rational-method"><i class="fa fa-check"></i><b>5.1</b> Rational Method</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="rational-method-and-nrcs-curve-number-20-pts.html"><a href="rational-method-and-nrcs-curve-number-20-pts.html#background-information-1"><i class="fa fa-check"></i><b>5.1.1</b> Background information</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="rational-method-and-nrcs-curve-number-20-pts.html"><a href="rational-method-and-nrcs-curve-number-20-pts.html#curve-number"><i class="fa fa-check"></i><b>5.2</b> Curve Number</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="rational-method-and-nrcs-curve-number-20-pts.html"><a href="rational-method-and-nrcs-curve-number-20-pts.html#background-information-2"><i class="fa fa-check"></i><b>5.2.1</b> Background information</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="rational-method-and-nrcs-curve-number-20-pts.html"><a href="rational-method-and-nrcs-curve-number-20-pts.html#codework"><i class="fa fa-check"></i><b>5.3</b> Codework</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="rational-method-and-nrcs-curve-number-20-pts.html"><a href="rational-method-and-nrcs-curve-number-20-pts.html#packages-1"><i class="fa fa-check"></i><b>5.3.1</b> Packages</a></li>
<li class="chapter" data-level="5.3.2" data-path="rational-method-and-nrcs-curve-number-20-pts.html"><a href="rational-method-and-nrcs-curve-number-20-pts.html#part-i---rational-method"><i class="fa fa-check"></i><b>5.3.2</b> Part I - Rational Method</a></li>
<li class="chapter" data-level="5.3.3" data-path="rational-method-and-nrcs-curve-number-20-pts.html"><a href="rational-method-and-nrcs-curve-number-20-pts.html#part-ii---nrcs-cn"><i class="fa fa-check"></i><b>5.3.3</b> Part II - NRCS CN</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="transfer-function-rainfall-runoff-models.html"><a href="transfer-function-rainfall-runoff-models.html"><i class="fa fa-check"></i><b>6</b> Transfer function rainfall-runoff models</a>
<ul>
<li class="chapter" data-level="6.1" data-path="transfer-function-rainfall-runoff-models.html"><a href="transfer-function-rainfall-runoff-models.html#summary-1"><i class="fa fa-check"></i><b>6.1</b> Summary</a></li>
<li class="chapter" data-level="6.2" data-path="transfer-function-rainfall-runoff-models.html"><a href="transfer-function-rainfall-runoff-models.html#overall-learning-objectives-1"><i class="fa fa-check"></i><b>6.2</b> Overall Learning Objectives</a></li>
<li class="chapter" data-level="6.3" data-path="transfer-function-rainfall-runoff-models.html"><a href="transfer-function-rainfall-runoff-models.html#terminology"><i class="fa fa-check"></i><b>6.3</b> Terminology</a></li>
<li class="chapter" data-level="6.4" data-path="transfer-function-rainfall-runoff-models.html"><a href="transfer-function-rainfall-runoff-models.html#the-linear-time-invariant-tf"><i class="fa fa-check"></i><b>6.4</b> The Linear Time-Invariant TF</a></li>
<li class="chapter" data-level="6.5" data-path="transfer-function-rainfall-runoff-models.html"><a href="transfer-function-rainfall-runoff-models.html#codework---transfer-function-rainfall-runoff-model"><i class="fa fa-check"></i><b>6.5</b> Codework - Transfer function rainfall-runoff model</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="transfer-function-rainfall-runoff-models.html"><a href="transfer-function-rainfall-runoff-models.html#download-the-repo-for-this-lab-here"><i class="fa fa-check"></i><b>6.5.1</b> Download the repo for this lab HERE</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="monte-carlo-simulation-20-pnts.html"><a href="monte-carlo-simulation-20-pnts.html"><i class="fa fa-check"></i><b>7</b> Monte Carlo Simulation (20 pnts)</a>
<ul>
<li class="chapter" data-level="7.1" data-path="monte-carlo-simulation-20-pnts.html"><a href="monte-carlo-simulation-20-pnts.html#background"><i class="fa fa-check"></i><b>7.1</b> Background:</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="monte-carlo-simulation-20-pnts.html"><a href="monte-carlo-simulation-20-pnts.html#reading"><i class="fa fa-check"></i><b>7.1.1</b> Reading</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="monte-carlo-simulation-20-pnts.html"><a href="monte-carlo-simulation-20-pnts.html#how-does-this-apply-to-hydrological-modeling"><i class="fa fa-check"></i><b>7.2</b> How does this apply to hydrological modeling?</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="monte-carlo-simulation-20-pnts.html"><a href="monte-carlo-simulation-20-pnts.html#example"><i class="fa fa-check"></i><b>7.2.1</b> Example</a></li>
<li class="chapter" data-level="7.2.2" data-path="monte-carlo-simulation-20-pnts.html"><a href="monte-carlo-simulation-20-pnts.html#reading-1"><i class="fa fa-check"></i><b>7.2.2</b> Reading</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="monte-carlo-simulation-20-pnts.html"><a href="monte-carlo-simulation-20-pnts.html#how-do-we-generate-a-simulation-with-code"><i class="fa fa-check"></i><b>7.3</b> How do we generate a simulation with code?</a></li>
<li class="chapter" data-level="7.4" data-path="monte-carlo-simulation-20-pnts.html"><a href="monte-carlo-simulation-20-pnts.html#codework-1"><i class="fa fa-check"></i><b>7.4</b> Codework</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="monte-carlo-simulation-20-pnts.html"><a href="monte-carlo-simulation-20-pnts.html#download-the-repo-for-this-lab-here-1"><i class="fa fa-check"></i><b>7.4.1</b> Download the repo for this lab HERE</a></li>
<li class="chapter" data-level="7.4.2" data-path="monte-carlo-simulation-20-pnts.html"><a href="monte-carlo-simulation-20-pnts.html#setup"><i class="fa fa-check"></i><b>7.4.2</b> Setup</a></li>
<li class="chapter" data-level="7.4.3" data-path="monte-carlo-simulation-20-pnts.html"><a href="monte-carlo-simulation-20-pnts.html#parameter-initialization"><i class="fa fa-check"></i><b>7.4.3</b> Parameter initialization</a></li>
<li class="chapter" data-level="7.4.4" data-path="monte-carlo-simulation-20-pnts.html"><a href="monte-carlo-simulation-20-pnts.html#mc-model-run"><i class="fa fa-check"></i><b>7.4.4</b> MC Model run</a></li>
<li class="chapter" data-level="7.4.5" data-path="monte-carlo-simulation-20-pnts.html"><a href="monte-carlo-simulation-20-pnts.html#sensitivity-analysis"><i class="fa fa-check"></i><b>7.4.5</b> Sensitivity analysis</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="classifying-model-structure---lecture-only-0-pts.html"><a href="classifying-model-structure---lecture-only-0-pts.html"><i class="fa fa-check"></i><b>8</b> Classifying model structure - Lecture only (0 pts)</a>
<ul>
<li class="chapter" data-level="8.1" data-path="classifying-model-structure---lecture-only-0-pts.html"><a href="classifying-model-structure---lecture-only-0-pts.html#spatial-complexity"><i class="fa fa-check"></i><b>8.1</b> Spatial Complexity</a></li>
<li class="chapter" data-level="8.2" data-path="classifying-model-structure---lecture-only-0-pts.html"><a href="classifying-model-structure---lecture-only-0-pts.html#modeling-approaches"><i class="fa fa-check"></i><b>8.2</b> Modeling Approaches</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="snowmelt-models-for-runoff-timing---lecture-lab-20-pts.html"><a href="snowmelt-models-for-runoff-timing---lecture-lab-20-pts.html"><i class="fa fa-check"></i><b>9</b> Snowmelt Models for runoff timing - Lecture &amp; Lab (20 pts)</a>
<ul>
<li class="chapter" data-level="9.1" data-path="snowmelt-models-for-runoff-timing---lecture-lab-20-pts.html"><a href="snowmelt-models-for-runoff-timing---lecture-lab-20-pts.html#module-repo"><i class="fa fa-check"></i><b>9.1</b> Module repo</a></li>
<li class="chapter" data-level="9.2" data-path="snowmelt-models-for-runoff-timing---lecture-lab-20-pts.html"><a href="snowmelt-models-for-runoff-timing---lecture-lab-20-pts.html#background-1"><i class="fa fa-check"></i><b>9.2</b> Background:</a></li>
<li class="chapter" data-level="9.3" data-path="snowmelt-models-for-runoff-timing---lecture-lab-20-pts.html"><a href="snowmelt-models-for-runoff-timing---lecture-lab-20-pts.html#model-approaches"><i class="fa fa-check"></i><b>9.3</b> Model Approaches</a></li>
<li class="chapter" data-level="9.4" data-path="snowmelt-models-for-runoff-timing---lecture-lab-20-pts.html"><a href="snowmelt-models-for-runoff-timing---lecture-lab-20-pts.html#spatial-complexity-1"><i class="fa fa-check"></i><b>9.4</b> Spatial complexity</a></li>
<li class="chapter" data-level="9.5" data-path="snowmelt-models-for-runoff-timing---lecture-lab-20-pts.html"><a href="snowmelt-models-for-runoff-timing---lecture-lab-20-pts.html#model-choices-my-snow-is-different-from-your-snow"><i class="fa fa-check"></i><b>9.5</b> Model choices: My snow is different from your snow</a></li>
<li class="chapter" data-level="9.6" data-path="snowmelt-models-for-runoff-timing---lecture-lab-20-pts.html"><a href="snowmelt-models-for-runoff-timing---lecture-lab-20-pts.html#codework-2"><i class="fa fa-check"></i><b>9.6</b> Codework</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="snowmelt-models-for-runoff-timing---lecture-lab-20-pts.html"><a href="snowmelt-models-for-runoff-timing---lecture-lab-20-pts.html#download-the-repo-for-this-lab-here-2"><i class="fa fa-check"></i><b>9.6.1</b> Download the repo for this lab HERE</a></li>
<li class="chapter" data-level="9.6.2" data-path="snowmelt-models-for-runoff-timing---lecture-lab-20-pts.html"><a href="snowmelt-models-for-runoff-timing---lecture-lab-20-pts.html#import-data"><i class="fa fa-check"></i><b>9.6.2</b> Import data:</a></li>
<li class="chapter" data-level="9.6.3" data-path="snowmelt-models-for-runoff-timing---lecture-lab-20-pts.html"><a href="snowmelt-models-for-runoff-timing---lecture-lab-20-pts.html#calculate-liquid-input"><i class="fa fa-check"></i><b>9.6.3</b> Calculate liquid input</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="snowmelt-models-for-runoff-timing---lecture-lab-20-pts.html"><a href="snowmelt-models-for-runoff-timing---lecture-lab-20-pts.html#modeling-swe"><i class="fa fa-check"></i><b>9.7</b> Modeling SWE</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="learning-module-10---gridded-and-tabular-data-retrieval.html"><a href="learning-module-10---gridded-and-tabular-data-retrieval.html"><i class="fa fa-check"></i><b>10</b> Learning Module 10 - Gridded and tabular data retrieval</a>
<ul>
<li class="chapter" data-level="10.1" data-path="learning-module-10---gridded-and-tabular-data-retrieval.html"><a href="learning-module-10---gridded-and-tabular-data-retrieval.html#objectives"><i class="fa fa-check"></i><b>10.1</b> Objectives</a></li>
<li class="chapter" data-level="10.2" data-path="learning-module-10---gridded-and-tabular-data-retrieval.html"><a href="learning-module-10---gridded-and-tabular-data-retrieval.html#background-2"><i class="fa fa-check"></i><b>10.2</b> Background</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="learning-module-10---gridded-and-tabular-data-retrieval.html"><a href="learning-module-10---gridded-and-tabular-data-retrieval.html#a-refresher-in-gis-concepts"><i class="fa fa-check"></i><b>10.2.1</b> A refresher in GIS concepts:</a></li>
<li class="chapter" data-level="10.2.2" data-path="learning-module-10---gridded-and-tabular-data-retrieval.html"><a href="learning-module-10---gridded-and-tabular-data-retrieval.html#a-refresher-in-remote-sensing"><i class="fa fa-check"></i><b>10.2.2</b> A refresher in remote sensing:</a></li>
<li class="chapter" data-level="10.2.3" data-path="learning-module-10---gridded-and-tabular-data-retrieval.html"><a href="learning-module-10---gridded-and-tabular-data-retrieval.html#ethical-conduct"><i class="fa fa-check"></i><b>10.2.3</b> Ethical conduct</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="learning-module-10---gridded-and-tabular-data-retrieval.html"><a href="learning-module-10---gridded-and-tabular-data-retrieval.html#codework-3"><i class="fa fa-check"></i><b>10.3</b> Codework</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="learning-module-10---gridded-and-tabular-data-retrieval.html"><a href="learning-module-10---gridded-and-tabular-data-retrieval.html#setup-1"><i class="fa fa-check"></i><b>10.3.1</b> Setup:<br></a></li>
<li class="chapter" data-level="10.3.2" data-path="learning-module-10---gridded-and-tabular-data-retrieval.html"><a href="learning-module-10---gridded-and-tabular-data-retrieval.html#selecting-a-watershed"><i class="fa fa-check"></i><b>10.3.2</b> Selecting a watershed:</a></li>
<li class="chapter" data-level="10.3.3" data-path="learning-module-10---gridded-and-tabular-data-retrieval.html"><a href="learning-module-10---gridded-and-tabular-data-retrieval.html#flow-data-retrieval"><i class="fa fa-check"></i><b>10.3.3</b> Flow data retrieval:</a></li>
<li class="chapter" data-level="10.3.4" data-path="learning-module-10---gridded-and-tabular-data-retrieval.html"><a href="learning-module-10---gridded-and-tabular-data-retrieval.html#watershed-boundary-vector-data"><i class="fa fa-check"></i><b>10.3.4</b> Watershed boundary vector data:</a></li>
<li class="chapter" data-level="10.3.5" data-path="learning-module-10---gridded-and-tabular-data-retrieval.html"><a href="learning-module-10---gridded-and-tabular-data-retrieval.html#digital-elevation-models-dem"><i class="fa fa-check"></i><b>10.3.5</b> Digital Elevation Models (DEM)</a></li>
<li class="chapter" data-level="10.3.6" data-path="learning-module-10---gridded-and-tabular-data-retrieval.html"><a href="learning-module-10---gridded-and-tabular-data-retrieval.html#other-remotely-sensed-data"><i class="fa fa-check"></i><b>10.3.6</b> Other remotely sensed data:</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="dem-processing.html"><a href="dem-processing.html"><i class="fa fa-check"></i><b>11</b> DEM processing</a>
<ul>
<li class="chapter" data-level="11.1" data-path="dem-processing.html"><a href="dem-processing.html#the-link-to-the-repo-is-here"><i class="fa fa-check"></i><b>11.1</b> THE LINK TO THE REPO IS HERE</a></li>
<li class="chapter" data-level="11.2" data-path="dem-processing.html"><a href="dem-processing.html#objective"><i class="fa fa-check"></i><b>11.2</b> Objective:</a></li>
<li class="chapter" data-level="11.3" data-path="dem-processing.html"><a href="dem-processing.html#background-3"><i class="fa fa-check"></i><b>11.3</b> Background:</a></li>
<li class="chapter" data-level="11.4" data-path="dem-processing.html"><a href="dem-processing.html#codework-4"><i class="fa fa-check"></i><b>11.4</b> Codework</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="dem-processing.html"><a href="dem-processing.html#installing-libraries"><i class="fa fa-check"></i><b>11.4.1</b> Installing libraries</a></li>
<li class="chapter" data-level="11.4.2" data-path="dem-processing.html"><a href="dem-processing.html#generate-functions"><i class="fa fa-check"></i><b>11.4.2</b> Generate functions</a></li>
<li class="chapter" data-level="11.4.3" data-path="dem-processing.html"><a href="dem-processing.html#establish-new-directoriesfolders"><i class="fa fa-check"></i><b>11.4.3</b> Establish new directories(folders)</a></li>
<li class="chapter" data-level="11.4.4" data-path="dem-processing.html"><a href="dem-processing.html#resample-dems"><i class="fa fa-check"></i><b>11.4.4</b> Resample DEMs</a></li>
<li class="chapter" data-level="11.4.5" data-path="dem-processing.html"><a href="dem-processing.html#filling-and-breaching"><i class="fa fa-check"></i><b>11.4.5</b> Filling and breaching</a></li>
<li class="chapter" data-level="11.4.6" data-path="dem-processing.html"><a href="dem-processing.html#flow-direction-and-accumulation-rasters"><i class="fa fa-check"></i><b>11.4.6</b> Flow direction and accumulation rasters</a></li>
<li class="chapter" data-level="11.4.7" data-path="dem-processing.html"><a href="dem-processing.html#streams"><i class="fa fa-check"></i><b>11.4.7</b> Streams</a></li>
<li class="chapter" data-level="11.4.8" data-path="dem-processing.html"><a href="dem-processing.html#final-thoughts-1"><i class="fa fa-check"></i><b>11.4.8</b> Final thoughts:</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="evapotranspiration.html"><a href="evapotranspiration.html"><i class="fa fa-check"></i><b>12</b> Evapotranspiration</a>
<ul>
<li class="chapter" data-level="12.1" data-path="evapotranspiration.html"><a href="evapotranspiration.html#the-repo-can-be-found-here"><i class="fa fa-check"></i><b>12.1</b> The repo can be found here</a></li>
<li class="chapter" data-level="12.2" data-path="evapotranspiration.html"><a href="evapotranspiration.html#background-4"><i class="fa fa-check"></i><b>12.2</b> Background</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="evapotranspiration.html"><a href="evapotranspiration.html#transpiration"><i class="fa fa-check"></i><b>12.2.1</b> Transpiration</a></li>
<li class="chapter" data-level="12.2.2" data-path="evapotranspiration.html"><a href="evapotranspiration.html#measurements"><i class="fa fa-check"></i><b>12.2.2</b> Measurements</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="evapotranspiration.html"><a href="evapotranspiration.html#codework-5"><i class="fa fa-check"></i><b>12.3</b> Codework:</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="evapotranspiration.html"><a href="evapotranspiration.html#the-evapotranspiration-package"><i class="fa fa-check"></i><b>12.3.1</b> The Evapotranspiration package</a></li>
<li class="chapter" data-level="12.3.2" data-path="evapotranspiration.html"><a href="evapotranspiration.html#the-priestly-taylor-method-actual-evapotranspiration"><i class="fa fa-check"></i><b>12.3.2</b> The Priestly Taylor method (actual evapotranspiration)</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Quantitative Environmental Methods: LRES 546</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="dem-processing" class="section level1 hasAnchor" number="11">
<h1><span class="header-section-number">Chapter 11</span> DEM processing<a href="dem-processing.html#dem-processing" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="the-link-to-the-repo-is-here" class="section level2 hasAnchor" number="11.1">
<h2><span class="header-section-number">11.1</span> THE <a href="https://github.com/tpcovino/08_dem_processing.git" target="_blank">LINK TO THE REPO IS HERE</a><a href="dem-processing.html#the-link-to-the-repo-is-here" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>15pnts</p>
</div>
<div id="objective" class="section level2 hasAnchor" number="11.2">
<h2><span class="header-section-number">11.2</span> Objective:<a href="dem-processing.html#objective" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Users will explore basic hydrological tools through the process of DEM preprocessing and defining stream networks for a watershed in the Fraser Experimental Forest in Colorado using Whitebox Tools for R. This exercise will also demonstrate methods for writing functions and efficiently handling multiple files simultaneously, including importing, processing, and exporting data within the context of Whitebox Tools for R.</p>
</div>
<div id="background-3" class="section level2 hasAnchor" number="11.3">
<h2><span class="header-section-number">11.3</span> Background:<a href="dem-processing.html#background-3" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Hydrological analysis preprocessing involves the use of digital elevation model (DEM) raster data to establish a watershed model and a simulation of surface hydrological processes. These steps enable us to quantify key parameters such as flow accumulation, stream network characteristics, and hydrological connectivity, which are essential for studying the dynamics of water movement within a landscape. Overall, preprocessing is the set of foundational steps in hydrological modeling and analysis.</p>
<p><strong>Whitebox Tools</strong> is an advanced geospatial data analysis platform that can be used to perform common geographical information systems (GIS) analysis operations. This platform was developed with the Center for Hydrogeomatics in Guelph University so it is focused on hydrological analysis. With just a DEM, it allows us to produce a multitude of outputs that can be used for future analysis (Lindsay, 2016) <a href="doi:10.1016/j.cageo.2016.07.003" class="uri">doi:10.1016/j.cageo.2016.07.003</a>). While we are demonstrating its use in R, these tools are also available in QGIS and Python platforms.</p>
</div>
<div id="codework-4" class="section level2 hasAnchor" number="11.4">
<h2><span class="header-section-number">11.4</span> Codework<a href="dem-processing.html#codework-4" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="installing-libraries" class="section level3 hasAnchor" number="11.4.1">
<h3><span class="header-section-number">11.4.1</span> Installing libraries<a href="dem-processing.html#installing-libraries" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We are going to try installing the whitebox R package from CRAN as it should be the simplest method.</p>
<p>However, if this does not work for you, you can install the development version from GitHub by putting this inside a code chunk:</p>
<p>if (!require(“remotes”)) install.packages(‘remotes’)
remotes::install_github(“opengeos/whiteboxR”, build = FALSE)</p>
<p>More information on installation can be found at: <a href="https://cran.r-project.org/web/packages/whitebox/readme/README.html" class="uri">https://cran.r-project.org/web/packages/whitebox/readme/README.html</a></p>
<p>Helpful whitebox documentation can be found at <a href="https://jblindsay.github.io/wbt_book/preface.html" class="uri">https://jblindsay.github.io/wbt_book/preface.html</a>.
Essentially, we will be using input rasters via filepath and output filepaths as arguments for various whitebox functions. The script is designed to perform functions on all rasters in a given folder at once.</p>
<p>When writing scripts, developers typically follow a standard workflow:<br>
1. Import required libraries <br>
2. Generate functions useful throughout the script <br>
3. Establish working directories or paths to other directories if needed <br>
4. Import data <br>
5. Data Cleaning and Preprocessing - this may involve handling missing values, removing outlines, converting to preferred units. etc. <br>
6. Exploratory Data Analysis - it is beneficial to explore data visually to help uunderstand the characteristics of the data. <br>
7. Apply functions, or models or other analytical techniques <br>
8. Evaluate results - If modeling, this may involve comparing model predictions with observed data or conducting sensitivity analysis <br>
9. Visualize and report - plots, maps and tables can be effective ways to communicate findings. <br><br></p>
<p>While you might find slight variations among collaborators, following this general workflow ensures that our scripts are structured in a way that facilitates easy sharing and reproducibility of results. <br></p>
</div>
<div id="generate-functions" class="section level3 hasAnchor" number="11.4.2">
<h3><span class="header-section-number">11.4.2</span> Generate functions<a href="dem-processing.html#generate-functions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Since we have imported the required libraries, let’s generate some functions.</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="dem-processing.html#cb83-1" tabindex="-1"></a><span class="co"># # extractsitename will extract a site name from the filepaths we provide. You will likely need to change the indexing in this function based on the filepaths to your DEMs. </span></span>
<span id="cb83-2"><a href="dem-processing.html#cb83-2" tabindex="-1"></a><span class="co"># extractsitename &lt;- function(x) {</span></span>
<span id="cb83-3"><a href="dem-processing.html#cb83-3" tabindex="-1"></a><span class="co">#     splitpath &lt;- strsplit(x,&#39;/&#39;)</span></span>
<span id="cb83-4"><a href="dem-processing.html#cb83-4" tabindex="-1"></a><span class="co">#     basename &lt;- splitpath[[1]][3]</span></span>
<span id="cb83-5"><a href="dem-processing.html#cb83-5" tabindex="-1"></a><span class="co">#     splitbase &lt;- strsplit(basename,&#39;_&#39;)[[1]][1]</span></span>
<span id="cb83-6"><a href="dem-processing.html#cb83-6" tabindex="-1"></a><span class="co">#     return(splitbase)</span></span>
<span id="cb83-7"><a href="dem-processing.html#cb83-7" tabindex="-1"></a><span class="co"># }</span></span>
<span id="cb83-8"><a href="dem-processing.html#cb83-8" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb83-9"><a href="dem-processing.html#cb83-9" tabindex="-1"></a><span class="co"># #One method to determine how to assign correct indexes is to run each of the lines in this function in your console and view the results. For example, let&#39;s first list all files in your current working directory:</span></span>
<span id="cb83-10"><a href="dem-processing.html#cb83-10" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb83-11"><a href="dem-processing.html#cb83-11" tabindex="-1"></a><span class="co"># # List all files recursively in the current working directory</span></span>
<span id="cb83-12"><a href="dem-processing.html#cb83-12" tabindex="-1"></a><span class="co"># all_files &lt;- list.files(recursive = TRUE)</span></span></code></pre></div>
<p><strong>Q1.</strong>(2 pnt) What does date: “16 April, 2024” in the header do?</p>
<p>ANSWER:</p>
<p><strong>Q2.</strong>(2 pnt) What does ‘recursive = TRUE’ do? What would the ‘recursive = FALSE’ return?
ANSWER:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="dem-processing.html#cb84-1" tabindex="-1"></a><span class="co"># # Now look at all_files printed in your console and select a filepath that represents a DEM. You can access that filepath alone by indexing all_files</span></span>
<span id="cb84-2"><a href="dem-processing.html#cb84-2" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb84-3"><a href="dem-processing.html#cb84-3" tabindex="-1"></a><span class="co"># print(all_files[3]) # you will likely have to change &#39;3&#39; here to match your filepath of choice</span></span></code></pre></div>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="dem-processing.html#cb85-1" tabindex="-1"></a><span class="co"># # You can use this indexed file list to test each line of the extractsitename function to see what it does:</span></span>
<span id="cb85-2"><a href="dem-processing.html#cb85-2" tabindex="-1"></a><span class="co"># splitpath &lt;- strsplit(all_files[3], split = &#39;/&#39;) # again, change &#39;3&#39; to match your filepath</span></span>
<span id="cb85-3"><a href="dem-processing.html#cb85-3" tabindex="-1"></a><span class="co"># splitpath</span></span>
<span id="cb85-4"><a href="dem-processing.html#cb85-4" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb85-5"><a href="dem-processing.html#cb85-5" tabindex="-1"></a><span class="co"># # Note that strsplit splits a character string by whatever symbol or character we provide in the &#39;split&#39; argument. Also note that splitpath is a list within a list, indicated by the double set of brackets around 1: [[1]]. We can &#39;unlist&#39; splitpath, or we can call the string we want by using both list indexes:</span></span>
<span id="cb85-6"><a href="dem-processing.html#cb85-6" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb85-7"><a href="dem-processing.html#cb85-7" tabindex="-1"></a><span class="co"># basename &lt;- splitpath[[1]][2] # here, basename should return the .tif name. If it does not, change the indices (likely &#39;2&#39;) until your basename is the name of the tif. e.g., &#39;lexen_0.5m_DEM.tif&#39;</span></span>
<span id="cb85-8"><a href="dem-processing.html#cb85-8" tabindex="-1"></a><span class="co"># basename</span></span></code></pre></div>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="dem-processing.html#cb86-1" tabindex="-1"></a><span class="co"># # Now we can split the tif name to extract the site name:</span></span>
<span id="cb86-2"><a href="dem-processing.html#cb86-2" tabindex="-1"></a><span class="co"># splitbase &lt;- strsplit(basename,&#39;_&#39;)[[1]][1]</span></span>
<span id="cb86-3"><a href="dem-processing.html#cb86-3" tabindex="-1"></a><span class="co"># splitbase</span></span>
<span id="cb86-4"><a href="dem-processing.html#cb86-4" tabindex="-1"></a></span>
<span id="cb86-5"><a href="dem-processing.html#cb86-5" tabindex="-1"></a><span class="co"># Note that here we combined a couple of steps, splitting the file name and extracting the desired string in one line. </span></span></code></pre></div>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="dem-processing.html#cb87-1" tabindex="-1"></a><span class="co"># # Now let&#39;s save the function extractsitename again, but with the indices generate the sitenames using your current working directory.</span></span>
<span id="cb87-2"><a href="dem-processing.html#cb87-2" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb87-3"><a href="dem-processing.html#cb87-3" tabindex="-1"></a><span class="co"># extractsitename &lt;- function(x) {</span></span>
<span id="cb87-4"><a href="dem-processing.html#cb87-4" tabindex="-1"></a><span class="co">#     splitpath &lt;- strsplit(x,&#39;/&#39;)</span></span>
<span id="cb87-5"><a href="dem-processing.html#cb87-5" tabindex="-1"></a><span class="co">#     basename &lt;- splitpath[[1]][2]</span></span>
<span id="cb87-6"><a href="dem-processing.html#cb87-6" tabindex="-1"></a><span class="co">#     splitbase &lt;- strsplit(basename,&#39;_&#39;)[[1]][1]</span></span>
<span id="cb87-7"><a href="dem-processing.html#cb87-7" tabindex="-1"></a><span class="co">#     return(splitbase)</span></span>
<span id="cb87-8"><a href="dem-processing.html#cb87-8" tabindex="-1"></a><span class="co"># }</span></span>
<span id="cb87-9"><a href="dem-processing.html#cb87-9" tabindex="-1"></a></span>
<span id="cb87-10"><a href="dem-processing.html#cb87-10" tabindex="-1"></a><span class="co"># You can test the function in your console with: extractsitename(all_files[2]). This should return a site name (in this exercise, fool, lexen or deadhorse). </span></span></code></pre></div>
<p><strong>EXTRA</strong> (1pnt) : Rewrite this function to generate ‘splitbase’ with fewer lines. For example, what happens when you replace ‘basename’ in ‘splitbase &lt;- strsplit(basename,’_‘)[[1]][1]’ with ‘splitpath[[1]][2]’?</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="dem-processing.html#cb88-1" tabindex="-1"></a><span class="co"># Here we will generate another function that we will use later in the script. </span></span>
<span id="cb88-2"><a href="dem-processing.html#cb88-2" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb88-3"><a href="dem-processing.html#cb88-3" tabindex="-1"></a><span class="co"># # Create a function to resample and export a single raster</span></span>
<span id="cb88-4"><a href="dem-processing.html#cb88-4" tabindex="-1"></a><span class="co"># resample_and_export &lt;- function(file_path) {</span></span>
<span id="cb88-5"><a href="dem-processing.html#cb88-5" tabindex="-1"></a><span class="co">#   sitename &lt;- extractsitename(file_path)</span></span>
<span id="cb88-6"><a href="dem-processing.html#cb88-6" tabindex="-1"></a><span class="co">#   r &lt;- raster(file_path) # Read in the raster</span></span>
<span id="cb88-7"><a href="dem-processing.html#cb88-7" tabindex="-1"></a><span class="co">#   r_resamp &lt;- aggregate(r, fact = 20) # Resample the raster</span></span>
<span id="cb88-8"><a href="dem-processing.html#cb88-8" tabindex="-1"></a><span class="co">#   output_file_path &lt;- file.path(paste0(&#39;resampleddems/&#39;, sitename, &quot;_resampled.tif&quot;)) # Create the output file path</span></span>
<span id="cb88-9"><a href="dem-processing.html#cb88-9" tabindex="-1"></a><span class="co">#   writeRaster(r_resamp, filename = output_file_path, format = &quot;GTiff&quot;, overwrite = TRUE) # Export the resampled raster</span></span>
<span id="cb88-10"><a href="dem-processing.html#cb88-10" tabindex="-1"></a><span class="co">#   return(list(sitename = sitename, output_file_path = output_file_path)) # Return the sitename and output file path as a list</span></span>
<span id="cb88-11"><a href="dem-processing.html#cb88-11" tabindex="-1"></a><span class="co"># }</span></span></code></pre></div>
<p><strong>Q3.</strong> (2pnt) What is the point of writing a function and why do you think it is advantageous to write functions early in your script?
ANSWER:</p>
</div>
<div id="establish-new-directoriesfolders" class="section level3 hasAnchor" number="11.4.3">
<h3><span class="header-section-number">11.4.3</span> Establish new directories(folders)<a href="dem-processing.html#establish-new-directoriesfolders" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>in our working directory. We will use these to store the outputs of the Whitebox functions.</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="dem-processing.html#cb89-1" tabindex="-1"></a><span class="co"># # Define the directory names</span></span>
<span id="cb89-2"><a href="dem-processing.html#cb89-2" tabindex="-1"></a><span class="co"># directory_names &lt;- c(&#39;breachsinglecellpits&#39;, &#39;breachdep&#39;, &#39;resampleddems&#39;, &#39;d8pointer&#39;, &#39;logd8flowaccum&#39;, &#39;d8flowaccum&#39;, &#39;streams_wws&#39;,&#39;streams&#39;)</span></span>
<span id="cb89-3"><a href="dem-processing.html#cb89-3" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb89-4"><a href="dem-processing.html#cb89-4" tabindex="-1"></a><span class="co"># # Loop through each directory name</span></span>
<span id="cb89-5"><a href="dem-processing.html#cb89-5" tabindex="-1"></a><span class="co"># for (dir_name in directory_names) {</span></span>
<span id="cb89-6"><a href="dem-processing.html#cb89-6" tabindex="-1"></a><span class="co">#   # Check if the directory already exists, and create it if not</span></span>
<span id="cb89-7"><a href="dem-processing.html#cb89-7" tabindex="-1"></a><span class="co">#   if (!dir.exists(dir_name)) {</span></span>
<span id="cb89-8"><a href="dem-processing.html#cb89-8" tabindex="-1"></a><span class="co">#     dir.create(dir_name)</span></span>
<span id="cb89-9"><a href="dem-processing.html#cb89-9" tabindex="-1"></a><span class="co">#   }</span></span>
<span id="cb89-10"><a href="dem-processing.html#cb89-10" tabindex="-1"></a><span class="co"># }</span></span></code></pre></div>
<p>Check your working directory, you should see the new folders there.</p>
</div>
<div id="resample-dems" class="section level3 hasAnchor" number="11.4.4">
<h3><span class="header-section-number">11.4.4</span> Resample DEMs<a href="dem-processing.html#resample-dems" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Here we will start with LiDAR data with 0.5m resolution. While this resolution has useful applications, a high resolution DEM can make hydrological models very computationally expensive with little or no improvement to the output. If you have the option of high resolution data in your work, you can test model outputs at different resolutions to determine what is the most efficient and effective resolution for your work. Here, we will resample our LiDAR data to a 10m resolution.</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="dem-processing.html#cb90-1" tabindex="-1"></a><span class="co"># # Resample dem to 10m</span></span>
<span id="cb90-2"><a href="dem-processing.html#cb90-2" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb90-3"><a href="dem-processing.html#cb90-3" tabindex="-1"></a><span class="co"># #List all of the dem files within the LiDARdem directory</span></span>
<span id="cb90-4"><a href="dem-processing.html#cb90-4" tabindex="-1"></a><span class="co"># files &lt;- list.files(path =&#39;LiDARdem&#39;, pattern=&quot;*.tif&quot;, full.names=TRUE, recursive=FALSE)</span></span>
<span id="cb90-5"><a href="dem-processing.html#cb90-5" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb90-6"><a href="dem-processing.html#cb90-6" tabindex="-1"></a><span class="co"># # Use lapply to resample and export all resampled rasters</span></span>
<span id="cb90-7"><a href="dem-processing.html#cb90-7" tabindex="-1"></a><span class="co"># output_files &lt;- lapply(files, resample_and_export)</span></span></code></pre></div>
<p><strong>Q4.</strong> (3pnts) Did we use the function extractsitenames in the above chunk? How? What did it do?</p>
<p>ANSWER:</p>
<p>Let’s quickly check our work by importing a resampled DEM and checking the resolution.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="dem-processing.html#cb91-1" tabindex="-1"></a><span class="co"># # Specify the path to the raster file</span></span>
<span id="cb91-2"><a href="dem-processing.html#cb91-2" tabindex="-1"></a><span class="co"># path &lt;- &#39;resampleddems/fool_resampled.tif&#39;</span></span>
<span id="cb91-3"><a href="dem-processing.html#cb91-3" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb91-4"><a href="dem-processing.html#cb91-4" tabindex="-1"></a><span class="co"># # Import the raster</span></span>
<span id="cb91-5"><a href="dem-processing.html#cb91-5" tabindex="-1"></a><span class="co"># raster_obj &lt;- raster(path)</span></span>
<span id="cb91-6"><a href="dem-processing.html#cb91-6" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb91-7"><a href="dem-processing.html#cb91-7" tabindex="-1"></a><span class="co"># # Get the resolution</span></span>
<span id="cb91-8"><a href="dem-processing.html#cb91-8" tabindex="-1"></a><span class="co"># resolution &lt;- res(raster_obj)</span></span>
<span id="cb91-9"><a href="dem-processing.html#cb91-9" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb91-10"><a href="dem-processing.html#cb91-10" tabindex="-1"></a><span class="co"># # Print the resolution</span></span>
<span id="cb91-11"><a href="dem-processing.html#cb91-11" tabindex="-1"></a><span class="co"># print(resolution)</span></span></code></pre></div>
<p>Note: This can also be done without importing the raster to the workspace by installing the library gdalUtils.</p>
<p><strong>Q5.</strong>(2pnts) What is the resolution of the resampled DEM? Where and how could we change the resolution to 30m if desired?</p>
<p>ANSWER:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="dem-processing.html#cb92-1" tabindex="-1"></a><span class="co"># #List all of the resampled dem files within the resampleddems directory</span></span>
<span id="cb92-2"><a href="dem-processing.html#cb92-2" tabindex="-1"></a><span class="co"># files &lt;- list.files(path = paste(&#39;resampleddems&#39;, sep = &quot;/&quot;), pattern=&quot;*.tif&quot;, full.names=TRUE, recursive=FALSE)</span></span></code></pre></div>
</div>
<div id="filling-and-breaching" class="section level3 hasAnchor" number="11.4.5">
<h3><span class="header-section-number">11.4.5</span> Filling and breaching<a href="dem-processing.html#filling-and-breaching" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When performing hydrological analysis on a DEM, the DEM usually needs to be pre-processed by <a href="https://www.researchgate.net/figure/Main-principles-of-depression-preprocessing-methods-Depressions-are-caused-by_fig2_260064729">‘filling’ or ‘breaching’</a> any depressions or sinks to create a hydraulically connected and filled DEM. There are several depression or pit filling options available in whitebox. Breach depressions can be a better option that just pit filling according to whitebox documentation, however, some users argue that this can smooth too much, resulting in an altered watershed delineation. It is prudent to investigate different DEM pre-processing methods and their resulting DEM. You can fill depressions directly, breach depressions and then fill them, applying breach or fill single cell pit before breach/fill depressions, and use the one that generates the most reasonable watershed delineation results.
Here we are going to make extra sure our flowpaths are uninhibited by first filling in single cell pits, and then breaching any larger depressions.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="dem-processing.html#cb93-1" tabindex="-1"></a><span class="co"># #Fill single cell pits for all rasters the folder &#39;resampleddems&#39; (for hydrologic correctness)</span></span>
<span id="cb93-2"><a href="dem-processing.html#cb93-2" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb93-3"><a href="dem-processing.html#cb93-3" tabindex="-1"></a><span class="co"># lapply(files, function(x) {</span></span>
<span id="cb93-4"><a href="dem-processing.html#cb93-4" tabindex="-1"></a><span class="co">#     sitename &lt;- extractsitename(x)</span></span>
<span id="cb93-5"><a href="dem-processing.html#cb93-5" tabindex="-1"></a><span class="co">#     bscp &lt;- wbt_breach_single_cell_pits(x, output = paste0(getwd(), &#39;/breachsinglecellpits/&#39;, sitename, &quot;_breach1&quot;)) #first wb function input</span></span>
<span id="cb93-6"><a href="dem-processing.html#cb93-6" tabindex="-1"></a><span class="co"># })</span></span>
<span id="cb93-7"><a href="dem-processing.html#cb93-7" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb93-8"><a href="dem-processing.html#cb93-8" tabindex="-1"></a><span class="co"># #List all of the files from previous function </span></span>
<span id="cb93-9"><a href="dem-processing.html#cb93-9" tabindex="-1"></a><span class="co"># breach1 &lt;- list.files(path= paste(&#39;breachsinglecellpits&#39;, sep = &#39;/&#39;), pattern=&quot;*.tif&quot;, full.names=TRUE, recursive=FALSE)</span></span>
<span id="cb93-10"><a href="dem-processing.html#cb93-10" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb93-11"><a href="dem-processing.html#cb93-11" tabindex="-1"></a><span class="co"># # apply breach depressions to every .tif in files list</span></span>
<span id="cb93-12"><a href="dem-processing.html#cb93-12" tabindex="-1"></a><span class="co"># lapply(breach1, function(x) {</span></span>
<span id="cb93-13"><a href="dem-processing.html#cb93-13" tabindex="-1"></a><span class="co">#     sitename &lt;- extractsitename(x)</span></span>
<span id="cb93-14"><a href="dem-processing.html#cb93-14" tabindex="-1"></a><span class="co">#     wbt_breach_depressions(x, output = paste0(getwd(),&#39;/breachdep/&#39;, sitename, &quot;_breachdep&quot;), flat_increment=.01) #first wb function input</span></span>
<span id="cb93-15"><a href="dem-processing.html#cb93-15" tabindex="-1"></a><span class="co"># })</span></span></code></pre></div>
</div>
<div id="flow-direction-and-accumulation-rasters" class="section level3 hasAnchor" number="11.4.6">
<h3><span class="header-section-number">11.4.6</span> Flow direction and accumulation rasters<a href="dem-processing.html#flow-direction-and-accumulation-rasters" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="dem-processing.html#cb94-1" tabindex="-1"></a><span class="co"># # List all of the filled files and use this list to make a flow direction grid and flow accumulation raster</span></span>
<span id="cb94-2"><a href="dem-processing.html#cb94-2" tabindex="-1"></a><span class="co"># breachdep &lt;- list.files(path = paste(&#39;breachdep&#39;, sep = &quot;/&quot;), pattern=&quot;*.tif&quot;, full.names=TRUE, recursive=FALSE)</span></span>
<span id="cb94-3"><a href="dem-processing.html#cb94-3" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb94-4"><a href="dem-processing.html#cb94-4" tabindex="-1"></a><span class="co"># #Flow direction grid (d8_pntr)</span></span>
<span id="cb94-5"><a href="dem-processing.html#cb94-5" tabindex="-1"></a><span class="co"># lapply(breachdep, function(x) {</span></span>
<span id="cb94-6"><a href="dem-processing.html#cb94-6" tabindex="-1"></a><span class="co">#     sitename &lt;- extractsitename(x)</span></span>
<span id="cb94-7"><a href="dem-processing.html#cb94-7" tabindex="-1"></a><span class="co">#     wbt_d8_pointer(x, output = paste0(getwd(), &#39;/d8pointer/&#39;, sitename, &quot;_d8pointer&quot;)) </span></span>
<span id="cb94-8"><a href="dem-processing.html#cb94-8" tabindex="-1"></a><span class="co"># })</span></span>
<span id="cb94-9"><a href="dem-processing.html#cb94-9" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb94-10"><a href="dem-processing.html#cb94-10" tabindex="-1"></a><span class="co"># # D8 flow accumulation (raster cells fully drain in 1 of 8 directions)</span></span>
<span id="cb94-11"><a href="dem-processing.html#cb94-11" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb94-12"><a href="dem-processing.html#cb94-12" tabindex="-1"></a><span class="co"># lapply(breachdep, function(x) {</span></span>
<span id="cb94-13"><a href="dem-processing.html#cb94-13" tabindex="-1"></a><span class="co">#     sitename &lt;- extractsitename(x)</span></span>
<span id="cb94-14"><a href="dem-processing.html#cb94-14" tabindex="-1"></a><span class="co">#     wbt_d8_flow_accumulation(x, output = paste0(getwd(), &#39;/logd8flowaccum/&#39;, sitename, &quot;_logd8flowaccum&quot;), </span></span>
<span id="cb94-15"><a href="dem-processing.html#cb94-15" tabindex="-1"></a><span class="co">#                              out_type=&#39;catchment area&#39;,</span></span>
<span id="cb94-16"><a href="dem-processing.html#cb94-16" tabindex="-1"></a><span class="co">#                              log=T) </span></span>
<span id="cb94-17"><a href="dem-processing.html#cb94-17" tabindex="-1"></a><span class="co"># })</span></span>
<span id="cb94-18"><a href="dem-processing.html#cb94-18" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb94-19"><a href="dem-processing.html#cb94-19" tabindex="-1"></a><span class="co"># # Not log-transformed so output is the upslope accumulated area to each pixel in m2</span></span>
<span id="cb94-20"><a href="dem-processing.html#cb94-20" tabindex="-1"></a><span class="co"># lapply(breachdep, function(x) {</span></span>
<span id="cb94-21"><a href="dem-processing.html#cb94-21" tabindex="-1"></a><span class="co">#     sitename &lt;- extractsitename(x)</span></span>
<span id="cb94-22"><a href="dem-processing.html#cb94-22" tabindex="-1"></a><span class="co">#     wbt_d8_flow_accumulation(x, output = paste0(getwd(), &#39;/d8flowaccum/&#39;, sitename, &quot;_d8flowaccum&quot;),</span></span>
<span id="cb94-23"><a href="dem-processing.html#cb94-23" tabindex="-1"></a><span class="co">#                      out_type=&#39;catchment area&#39;,</span></span>
<span id="cb94-24"><a href="dem-processing.html#cb94-24" tabindex="-1"></a><span class="co">#                      log=F)                              </span></span>
<span id="cb94-25"><a href="dem-processing.html#cb94-25" tabindex="-1"></a><span class="co"># })</span></span></code></pre></div>
<p><strong>Q6</strong> (2pnts) Check out the <a href="https://www.whiteboxgeo.com/manual/wbt_book/available_tools/hydrological_analysis.html#D8Pointer">WhiteboxTools User Manual</a>. What does a d8pointer raster tell us and what might we use it for?
ANSWER:</p>
<p>Let’s visualize some of our work so far:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="dem-processing.html#cb95-1" tabindex="-1"></a><span class="co"># #%%%%%%$$$$$$$$$ Visualize</span></span>
<span id="cb95-2"><a href="dem-processing.html#cb95-2" tabindex="-1"></a><span class="co"># path &lt;- paste0(getwd(), &#39;/d8pointer/fool_d8pointer.tif&#39;)</span></span>
<span id="cb95-3"><a href="dem-processing.html#cb95-3" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb95-4"><a href="dem-processing.html#cb95-4" tabindex="-1"></a><span class="co"># checkwrk &lt;- raster(path)</span></span>
<span id="cb95-5"><a href="dem-processing.html#cb95-5" tabindex="-1"></a><span class="co"># mapview(checkwrk)</span></span></code></pre></div>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="dem-processing.html#cb96-1" tabindex="-1"></a><span class="co"># #%%%%%%$$$$$$$$$ Visualize</span></span>
<span id="cb96-2"><a href="dem-processing.html#cb96-2" tabindex="-1"></a><span class="co"># path &lt;- paste0(getwd(), &#39;/d8flowaccum/fool_d8flowaccum.tif&#39;)</span></span>
<span id="cb96-3"><a href="dem-processing.html#cb96-3" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb96-4"><a href="dem-processing.html#cb96-4" tabindex="-1"></a><span class="co"># checkwrk &lt;- raster(path)</span></span>
<span id="cb96-5"><a href="dem-processing.html#cb96-5" tabindex="-1"></a><span class="co"># mapview(checkwrk)</span></span></code></pre></div>
<p><strong>Q7.</strong> (2pnts) What are the units for the values that you see in each of these legends? It may be helpful to check out the Manual again.
ANSWER:</p>
</div>
<div id="streams" class="section level3 hasAnchor" number="11.4.7">
<h3><span class="header-section-number">11.4.7</span> Streams<a href="dem-processing.html#streams" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Define streams using the flow accumulation raster. Use of the wbt_extract_streams function will return a raster with stream cells indicated only.</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="dem-processing.html#cb97-1" tabindex="-1"></a><span class="co"># #List all of the filled files </span></span>
<span id="cb97-2"><a href="dem-processing.html#cb97-2" tabindex="-1"></a><span class="co"># log_d8_flow_accum &lt;- list.files(path = paste(&#39;logd8flowaccum&#39;, sep = &quot;/&quot;), pattern=&quot;*.tif&quot;, full.names=TRUE, recursive=FALSE)</span></span>
<span id="cb97-3"><a href="dem-processing.html#cb97-3" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb97-4"><a href="dem-processing.html#cb97-4" tabindex="-1"></a><span class="co"># lapply(log_d8_flow_accum, function(x) {</span></span>
<span id="cb97-5"><a href="dem-processing.html#cb97-5" tabindex="-1"></a><span class="co">#   sitename &lt;- extractsitename(x)</span></span>
<span id="cb97-6"><a href="dem-processing.html#cb97-6" tabindex="-1"></a><span class="co">#   stream_raster &lt;- wbt_extract_streams(x, output = paste0(getwd(), &#39;/streams/&#39;, sitename, &quot;_streams&quot;), threshold = 12)</span></span>
<span id="cb97-7"><a href="dem-processing.html#cb97-7" tabindex="-1"></a><span class="co"># })</span></span></code></pre></div>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="dem-processing.html#cb98-1" tabindex="-1"></a><span class="co"># #%%%%%%$$$$$$$$$ Visualize</span></span>
<span id="cb98-2"><a href="dem-processing.html#cb98-2" tabindex="-1"></a><span class="co"># path &lt;- paste0(getwd(), &#39;/streams/fool_streams.tif&#39;)</span></span>
<span id="cb98-3"><a href="dem-processing.html#cb98-3" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb98-4"><a href="dem-processing.html#cb98-4" tabindex="-1"></a><span class="co"># mapview(raster(path))</span></span></code></pre></div>
<p>Sometimes we would prefer to see the stream within the watershed boundary. Here we are using the extent of the flow accumulation raster to generate a raster with ‘0’ to indicate watershed cells, along with stream cells indicated by the streams.tif. This is a demonstration for one watershed.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="dem-processing.html#cb99-1" tabindex="-1"></a><span class="co"># input_path &lt;- paste0(getwd(), &#39;/streams/fool_streams.tif&#39;)</span></span>
<span id="cb99-2"><a href="dem-processing.html#cb99-2" tabindex="-1"></a><span class="co"># # Read the output raster</span></span>
<span id="cb99-3"><a href="dem-processing.html#cb99-3" tabindex="-1"></a><span class="co"># stream_raster &lt;- raster(input_path)</span></span>
<span id="cb99-4"><a href="dem-processing.html#cb99-4" tabindex="-1"></a><span class="co">#   </span></span>
<span id="cb99-5"><a href="dem-processing.html#cb99-5" tabindex="-1"></a><span class="co"># # Convert NA to 0</span></span>
<span id="cb99-6"><a href="dem-processing.html#cb99-6" tabindex="-1"></a><span class="co"># stream_raster[is.na(stream_raster)] &lt;- 0</span></span>
<span id="cb99-7"><a href="dem-processing.html#cb99-7" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb99-8"><a href="dem-processing.html#cb99-8" tabindex="-1"></a><span class="co"># # Convert all non-zero values to 1</span></span>
<span id="cb99-9"><a href="dem-processing.html#cb99-9" tabindex="-1"></a><span class="co"># stream_raster[stream_raster != 0] &lt;- 1</span></span>
<span id="cb99-10"><a href="dem-processing.html#cb99-10" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb99-11"><a href="dem-processing.html#cb99-11" tabindex="-1"></a><span class="co"># # Create a zero raster with the same extent and resolution as the dem</span></span>
<span id="cb99-12"><a href="dem-processing.html#cb99-12" tabindex="-1"></a><span class="co"># zero_raster &lt;- raster(log_d8_flow_accum[2])</span></span>
<span id="cb99-13"><a href="dem-processing.html#cb99-13" tabindex="-1"></a><span class="co"># zero_raster[is.na(log_d8_flow_accum[2])] &lt;- NA</span></span>
<span id="cb99-14"><a href="dem-processing.html#cb99-14" tabindex="-1"></a><span class="co"># zero_raster[!is.na(zero_raster)] &lt;- 0</span></span>
<span id="cb99-15"><a href="dem-processing.html#cb99-15" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb99-16"><a href="dem-processing.html#cb99-16" tabindex="-1"></a><span class="co"># # Set the values in zero_raster to 1 where the stream_raster has 1</span></span>
<span id="cb99-17"><a href="dem-processing.html#cb99-17" tabindex="-1"></a><span class="co"># zero_raster[stream_raster &gt; 0] &lt;- 1</span></span>
<span id="cb99-18"><a href="dem-processing.html#cb99-18" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb99-19"><a href="dem-processing.html#cb99-19" tabindex="-1"></a><span class="co"># # Write the final raster to file</span></span>
<span id="cb99-20"><a href="dem-processing.html#cb99-20" tabindex="-1"></a><span class="co"># output_file_path &lt;- file.path(getwd(), &quot;streams_wws&quot;, paste0(&quot;fool_streams_wws.tif&quot;))</span></span>
<span id="cb99-21"><a href="dem-processing.html#cb99-21" tabindex="-1"></a><span class="co"># writeRaster(zero_raster, filename = output_file_path, format = &quot;GTiff&quot;, overwrite = TRUE)</span></span></code></pre></div>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="dem-processing.html#cb100-1" tabindex="-1"></a><span class="co"># #%%%%%%$$$$$$$$$ Visualize</span></span>
<span id="cb100-2"><a href="dem-processing.html#cb100-2" tabindex="-1"></a><span class="co"># path &lt;- paste0(getwd(), &#39;/streams_wws/fool_streams_wws.tif&#39;)</span></span>
<span id="cb100-3"><a href="dem-processing.html#cb100-3" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb100-4"><a href="dem-processing.html#cb100-4" tabindex="-1"></a><span class="co"># mapview(raster(path))</span></span></code></pre></div>
</div>
<div id="final-thoughts-1" class="section level3 hasAnchor" number="11.4.8">
<h3><span class="header-section-number">11.4.8</span> Final thoughts:<a href="dem-processing.html#final-thoughts-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are many more hydrological preprocessing and analysis tools available through Whitebox for R. If you are interested in watershed delineation in R, there is a <a href="https://www.whiteboxgeo.com/manual/wbt_book/available_tools/hydrological_analysis.html#Watershed">tutorial here</a> that is fairly easy to follow. However, if you find that you use these tools frequently and do not use R much in other work, you may also consider these options for hydrological analysis:<br><br>
1. <a href="https://saga-gis.sourceforge.io/saga_tool_doc/4.1.0/ta_hydrology.html">SAGA</a>
SAGA tools offer a versatile suite of geospatial processing capabilities accessible through both QGIS and ArcGIS plugins as well their standalone GUI interface. Often I find the GUI easiest for preprocessing, then I will import SAGA’s output rasters to QGIS for formatting or map making, or into model scripts. SAGA has a robust online support community, so it can be a valuable resource for hydrological work.<br><br>
2. Similarly, Whitebox GAT tools can be used as plugin to QGIS and ArcGIS, providing Whitebox functionality directly with in a GIS environment. <br>
When using these tools, the order of operations is similar to our work above: fill the DEM, generate a flow direction and flow accumulation raster, identify channels, delineate watersheds, then you can move forward according to the specificity of your project. Ultimately, the choice of workflow is yours, but I suggest documenting your process as you proceed, including links or file paths to projects and scripts within the written workflow. It’s also important to carefully consider the organization and storage of your projects and files. For instance, files generated by a GIS project should be readily accessible to any associated scripts. Returning to a preprocessing step can be challenging if there’s no clear way to trace back your workflow and regenerate a crucial layer.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="learning-module-10---gridded-and-tabular-data-retrieval.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="evapotranspiration.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/tpcovino/lres_546_bookdown/edit/main/11_dem_preprocessing.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/tpcovino/lres_546_bookdown/blob/main/11_dem_preprocessing.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
